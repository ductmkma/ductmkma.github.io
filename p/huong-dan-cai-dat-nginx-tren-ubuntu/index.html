<!doctype html><html lang=en dir=ltr><head><meta charset=utf-8><meta name=viewport content='width=device-width,initial-scale=1'><meta name=description content="Nginx là một trong những máy chủ web phổ biến nhất trên thế giới. Nó đã được sử dụng trong các hệ thống lớn. Đó có thể được lựa chọn làm máy chủ web hoặc reverse proxy."><title>Hướng dẫn cài đặt và thiết lập nginx trên Ubuntu - Nginx là một trong những máy chủ web phổ biến nhất trên thế giới. Nó đã được sử dụng trong các hệ thống lớn. Đó có thể được lựa chọn làm máy chủ web hoặc reverse proxy.</title>
<link rel=canonical href=https://ductmkma.github.io/p/huong-dan-cai-dat-nginx-tren-ubuntu/><link rel=stylesheet href=/scss/style.min.66591f70756a56e0323ee53939af71166b4e98fa62c31b6d59aa998edefc5943.css><meta property='og:title' content="Hướng dẫn cài đặt và thiết lập nginx trên Ubuntu"><meta property='og:description' content="Nginx là một trong những máy chủ web phổ biến nhất trên thế giới. Nó đã được sử dụng trong các hệ thống lớn. Đó có thể được lựa chọn làm máy chủ web hoặc reverse proxy."><meta property='og:url' content='https://ductmkma.github.io/p/huong-dan-cai-dat-nginx-tren-ubuntu/'><meta property='og:site_name' content='Trần Minh Đức'><meta property='og:type' content='article'><meta property='article:section' content='Post'><meta property='article:published_time' content='2024-05-12T11:06:46+07:00'><meta property='article:modified_time' content='2024-05-12T11:06:46+07:00'><meta property='og:image' content='https://ductmkma.github.io/p/huong-dan-cai-dat-nginx-tren-ubuntu/nginx-ubuntu-thumbnail.jpg'><meta name=twitter:title content="Hướng dẫn cài đặt và thiết lập nginx trên Ubuntu"><meta name=twitter:description content="Nginx là một trong những máy chủ web phổ biến nhất trên thế giới. Nó đã được sử dụng trong các hệ thống lớn. Đó có thể được lựa chọn làm máy chủ web hoặc reverse proxy."><meta name=twitter:card content="summary_large_image"><meta name=twitter:image content='https://ductmkma.github.io/p/huong-dan-cai-dat-nginx-tren-ubuntu/nginx-ubuntu-thumbnail.jpg'><link rel="shortcut icon" href=/favicon.ico><style>:root{--article-font-family:"Montserrat", var(--base-font-family);--base-font-family:"Montserrat", var(--sys-font-family)}</style><script>(function(){const e=document.createElement("link");e.href="https://fonts.googleapis.com/css2?family=Montserrat:ital,wght@0,100..900;1,100..900&display=swap",e.type="text/css",e.rel="stylesheet",document.head.appendChild(e)})()</script></head><body class=article-page><script>(function(){const e="StackColorScheme";localStorage.getItem(e)||localStorage.setItem(e,"auto")})()</script><script>(function(){const t="StackColorScheme",e=localStorage.getItem(t),n=window.matchMedia("(prefers-color-scheme: dark)").matches===!0;e=="dark"||e==="auto"&&n?document.documentElement.dataset.scheme="dark":document.documentElement.dataset.scheme="light"})()</script><div class="container main-container flex on-phone--column extended"><aside class="sidebar left-sidebar sticky"><button class="hamburger hamburger--spin" type=button id=toggle-menu aria-label="Toggle Menu">
<span class=hamburger-box><span class=hamburger-inner></span></span></button><header><figure class=site-avatar><a href=/><img src=/img/logo_hud1d737d418c8b2a24d1933f5a122a407_307886_300x0_resize_box_3.png width=300 height=300 class=site-logo loading=lazy alt=Avatar>
</a><span class=emoji>🍥</span></figure><div class=site-meta><h1 class=site-name><a href=/>Trần Minh Đức</a></h1><h2 class=site-description>Học hỏi là không ngừng chia sẻ</h2></div></header><ol class=menu-social><li><a href=mailto:ductm.kma@gmail.com target=_blank title=Mail rel=me><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="icon icon-tabler icons-tabler-outline icon-tabler-mail"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M3 7a2 2 0 012-2h14a2 2 0 012 2v10a2 2 0 01-2 2H5a2 2 0 01-2-2V7z"/><path d="M3 7l9 6 9-6"/></svg></a></li><li><a href=https://github.com/ductmkma target=_blank title=GitHub rel=me><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-brand-github" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M9 19c-4.3 1.4-4.3-2.5-6-3m12 5v-3.5c0-1 .1-1.4-.5-2 2.8-.3 5.5-1.4 5.5-6a4.6 4.6.0 00-1.3-3.2 4.2 4.2.0 00-.1-3.2s-1.1-.3-3.5 1.3a12.3 12.3.0 00-6.2.0C6.5 2.8 5.4 3.1 5.4 3.1a4.2 4.2.0 00-.1 3.2A4.6 4.6.0 004 9.5c0 4.6 2.7 5.7 5.5 6-.6.6-.6 1.2-.5 2V21"/></svg></a></li><li><a href=https://www.linkedin.com/in/ductm-it/ target=_blank title=Linkedin rel=me><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="icon icon-tabler icons-tabler-outline icon-tabler-brand-linkedin"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M4 4m0 2a2 2 0 012-2h12a2 2 0 012 2v12a2 2 0 01-2 2H6a2 2 0 01-2-2z"/><path d="M8 11v5"/><path d="M8 8v.01"/><path d="M12 16v-5"/><path d="M16 16v-3a2 2 0 00-4 0"/></svg></a></li></ol><ol class=menu id=main-menu><li><a href=/about><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="icon icon-tabler icons-tabler-outline icon-tabler-atom"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M12 12v.01"/><path d="M19.071 4.929c-1.562-1.562-6 .337-9.9 4.243-3.905 3.905-5.804 8.337-4.242 9.9 1.562 1.561 6-.338 9.9-4.244 3.905-3.905 5.804-8.337 4.242-9.9"/><path d="M4.929 4.929c-1.562 1.562.337 6 4.243 9.9 3.905 3.905 8.337 5.804 9.9 4.242 1.561-1.562-.338-6-4.244-9.9-3.905-3.905-8.337-5.804-9.9-4.242"/></svg>
<span>About</span></a></li><li><a href=/archives/><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-archive" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><rect x="3" y="4" width="18" height="4" rx="2"/><path d="M5 8v10a2 2 0 002 2h10a2 2 0 002-2V8"/><line x1="10" y1="12" x2="14" y2="12"/></svg>
<span>Archives</span></a></li><li><a href=/search/><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-search" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><circle cx="10" cy="10" r="7"/><line x1="21" y1="21" x2="15" y2="15"/></svg>
<span>Search</span></a></li><li class=menu-bottom-section><ol class=menu><li id=dark-mode-toggle><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-toggle-left" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><circle cx="8" cy="12" r="2"/><rect x="2" y="6" width="20" height="12" rx="6"/></svg>
<svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-toggle-right" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><circle cx="16" cy="12" r="2"/><rect x="2" y="6" width="20" height="12" rx="6"/></svg>
<span>Dark Mode</span></li></ol></li></ol></aside><aside class="sidebar right-sidebar sticky"><section class="widget archives"><div class=widget-icon><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-hash" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><line x1="5" y1="9" x2="19" y2="9"/><line x1="5" y1="15" x2="19" y2="15"/><line x1="11" y1="4" x2="7" y2="20"/><line x1="17" y1="4" x2="13" y2="20"/></svg></div><h2 class="widget-title section-title">Table of contents</h2><div class=widget--toc><nav id=TableOfContents><ol><li><a href=#điều-kiện-tiên-quyết>Điều kiện tiên quyết</a></li><li><a href=#cài-đặt>Cài đặt</a><ol><li><a href=#cài-đặt-nginx>Cài đặt nginx</a></li><li><a href=#thiết-lập-tường-lửa>Thiết lập tường lửa</a></li><li><a href=#kiểm-tra-trạng-thái-máy-chủ-web-nginx>Kiểm tra trạng thái máy chủ web Nginx</a></li></ol></li><li><a href=#quản-lý-nginx>Quản lý nginx</a></li><li><a href=#thiết-lập-nginx>Thiết lập nginx</a></li></ol></nav></div></section></aside><main class="main full-width"><article class="has-image main-article"><header class=article-header><div class=article-image><a href=/p/huong-dan-cai-dat-nginx-tren-ubuntu/><img src=/p/huong-dan-cai-dat-nginx-tren-ubuntu/nginx-ubuntu-thumbnail_huf7cb517d2cdbed92a4bfe52ccff1d72d_94809_800x0_resize_q75_box.jpg srcset="/p/huong-dan-cai-dat-nginx-tren-ubuntu/nginx-ubuntu-thumbnail_huf7cb517d2cdbed92a4bfe52ccff1d72d_94809_800x0_resize_q75_box.jpg 800w, /p/huong-dan-cai-dat-nginx-tren-ubuntu/nginx-ubuntu-thumbnail_huf7cb517d2cdbed92a4bfe52ccff1d72d_94809_1600x0_resize_q75_box.jpg 1600w" width=800 height=280 loading=lazy alt="Featured image of post Hướng dẫn cài đặt và thiết lập nginx trên Ubuntu"></a></div><div class=article-details><header class=article-category><a href=/categories/devops/>DevOps</a></header><div class=article-title-wrapper><h2 class=article-title><a href=/p/huong-dan-cai-dat-nginx-tren-ubuntu/>Hướng dẫn cài đặt và thiết lập nginx trên Ubuntu</a></h2><h3 class=article-subtitle>Nginx là một trong những máy chủ web phổ biến nhất trên thế giới. Nó đã được sử dụng trong các hệ thống lớn. Đó có thể được lựa chọn làm máy chủ web hoặc reverse proxy.</h3></div><footer class=article-time><div><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-calendar-time" width="56" height="56" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><path d="M11.795 21H5a2 2 0 01-2-2V7a2 2 0 012-2h12a2 2 0 012 2v4"/><circle cx="18" cy="18" r="4"/><path d="M15 3v4"/><path d="M7 3v4"/><path d="M3 11h16"/><path d="M18 16.496V18l1 1"/></svg>
<time class=article-time--published>May 12, 2024</time></div><div><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-clock" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><circle cx="12" cy="12" r="9"/><polyline points="12 7 12 12 15 15"/></svg>
<time class=article-time--reading>5 minute read</time></div></footer></div></header><section class=article-content><p>Chào các bạn, mình là Đức Tờ Mờ đây !</p><p>Hôm nay có nhiều bạn thực tập hỏi mình về cách cài đặt và cấu hình nginx nên quyết định viết một bài hướng dẫn nhỏ để giúp các bạn cài đặt và thiết lập nginx trên Ubuntu. Cụ thể ở đây mình sử dụng Ubuntu 20.04 nhé !</p><h2 id=điều-kiện-tiên-quyết>Điều kiện tiên quyết</h2><p>Bạn cần phải có một tài khoản user với quyền non-root</p><h2 id=cài-đặt>Cài đặt</h2><h3 id=cài-đặt-nginx>Cài đặt nginx</h3><p>Sử dụng terminal hoặc CMD để chạy các câu lệnh sau:</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>sudo apt update
</span></span><span class=line><span class=cl>sudo apt install nginx
</span></span></code></pre></td></tr></table></div></div><p>Sau khi thực hiện 2 dòng lệnh trên, nginx đã được cài đặt vào máy của bạn.</p><h3 id=thiết-lập-tường-lửa>Thiết lập tường lửa</h3><p>Để truy cập được nginx, yêu cầu tường lửa (Ubuntu Firewall – ufw) phải cho phép. Vì thế, chúng ta cần phải kiểm tra lại quy tắc (rules) của tường lửa trên máy chủ ubuntu.</p><p>Bạn cần chạy lệnh sau để kiểm tra các ứng dụng mà ufw nhận biết được</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>sudo ufw app list
</span></span></code></pre></td></tr></table></div></div><p>Lệnh trên sẽ cho ra output như sau:</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span><span class=lnt>6
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-fallback data-lang=fallback><span class=line><span class=cl>Output
</span></span><span class=line><span class=cl>Available applications:
</span></span><span class=line><span class=cl>  Nginx Full
</span></span><span class=line><span class=cl>  Nginx HTTP
</span></span><span class=line><span class=cl>  Nginx HTTPS
</span></span><span class=line><span class=cl>  OpenSSH
</span></span></code></pre></td></tr></table></div></div><ul><li>Nginx Full: Cho phép mở cổng 80 (không mã hóa) và cổng 443 (mã hóa)</li><li>Nginx HTTP: Cho phép mở cổng 80 (không mã hóa)</li><li>Nginx HTTPS: Cho phép mở cổng 443 (mã hóa)</li></ul><p>Tùy vào hoàn cảnh, chúng ta sẽ quyết định cấu hình tường lửa chấp nhận các loại ở trên. Ở đây, mình ví dụ sẽ cho phép mở cổng 80 chẳng hạn.</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>sudo ufw allow <span class=s1>&#39;Nginx HTTP&#39;</span>
</span></span></code></pre></td></tr></table></div></div><p>Kiểm tra lại trạng thái của tường lửa bằng lệnh sau:</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>sudo ufw status
</span></span></code></pre></td></tr></table></div></div><p>Lệnh trên sẽ cho ra output như sau:</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span><span class=lnt>6
</span><span class=lnt>7
</span><span class=lnt>8
</span><span class=lnt>9
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-fallback data-lang=fallback><span class=line><span class=cl>Output
</span></span><span class=line><span class=cl>Status: active
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>To                         Action      From
</span></span><span class=line><span class=cl>--                         ------      ----
</span></span><span class=line><span class=cl>OpenSSH                    ALLOW       Anywhere
</span></span><span class=line><span class=cl>Nginx HTTP                 ALLOW       Anywhere
</span></span><span class=line><span class=cl>OpenSSH (v6)               ALLOW       Anywhere (v6)
</span></span><span class=line><span class=cl>Nginx HTTP (v6)            ALLOW       Anywhere (v6)
</span></span></code></pre></td></tr></table></div></div><h3 id=kiểm-tra-trạng-thái-máy-chủ-web-nginx>Kiểm tra trạng thái máy chủ web Nginx</h3><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>systemctl status nginx
</span></span></code></pre></td></tr></table></div></div><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-gdscript3 data-lang=gdscript3><span class=line><span class=cl><span class=n>Output</span>
</span></span><span class=line><span class=cl><span class=err>●</span> <span class=n>nginx</span><span class=o>.</span><span class=n>service</span> <span class=o>-</span> <span class=n>A</span> <span class=n>high</span> <span class=n>performance</span> <span class=n>web</span> <span class=n>server</span> <span class=ow>and</span> <span class=n>a</span> <span class=n>reverse</span> <span class=n>proxy</span> <span class=n>server</span>
</span></span><span class=line><span class=cl>   <span class=n>Loaded</span><span class=p>:</span> <span class=n>loaded</span> <span class=p>(</span><span class=o>/</span><span class=n>lib</span><span class=o>/</span><span class=n>systemd</span><span class=o>/</span><span class=n>system</span><span class=o>/</span><span class=n>nginx</span><span class=o>.</span><span class=n>service</span><span class=p>;</span> <span class=n>enabled</span><span class=p>;</span> <span class=n>vendor</span> <span class=n>preset</span><span class=p>:</span> <span class=n>enabled</span><span class=p>)</span>
</span></span><span class=line><span class=cl>   <span class=n>Active</span><span class=p>:</span> <span class=n>active</span> <span class=p>(</span><span class=n>running</span><span class=p>)</span> <span class=n>since</span> <span class=n>Fri</span> <span class=mi>2023</span><span class=o>-</span><span class=mi>12</span><span class=o>-</span><span class=mi>10</span> <span class=mi>16</span><span class=p>:</span><span class=mi>08</span><span class=p>:</span><span class=mi>19</span> <span class=n>UTC</span><span class=p>;</span> <span class=mi>3</span> <span class=n>days</span> <span class=n>ago</span>
</span></span><span class=line><span class=cl>     <span class=n>Docs</span><span class=p>:</span> <span class=n>man</span><span class=p>:</span><span class=n>nginx</span><span class=p>(</span><span class=mi>8</span><span class=p>)</span>
</span></span><span class=line><span class=cl> <span class=n>Main</span> <span class=n>PID</span><span class=p>:</span> <span class=mi>2369</span> <span class=p>(</span><span class=n>nginx</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=n>Tasks</span><span class=p>:</span> <span class=mi>2</span> <span class=p>(</span><span class=n>limit</span><span class=p>:</span> <span class=mi>1153</span><span class=p>)</span>
</span></span><span class=line><span class=cl>   <span class=n>Memory</span><span class=p>:</span> <span class=mf>3.5</span><span class=n>M</span>
</span></span><span class=line><span class=cl>   <span class=n>CGroup</span><span class=p>:</span> <span class=o>/</span><span class=n>system</span><span class=o>.</span><span class=n>slice</span><span class=o>/</span><span class=n>nginx</span><span class=o>.</span><span class=n>service</span>
</span></span><span class=line><span class=cl>           <span class=err>├─</span><span class=mi>2369</span> <span class=n>nginx</span><span class=p>:</span> <span class=n>master</span> <span class=n>process</span> <span class=o>/</span><span class=n>usr</span><span class=o>/</span><span class=n>sbin</span><span class=o>/</span><span class=n>nginx</span> <span class=o>-</span><span class=n>g</span> <span class=n>daemon</span> <span class=n>on</span><span class=p>;</span> <span class=n>master_process</span> <span class=n>on</span><span class=p>;</span>
</span></span><span class=line><span class=cl>           <span class=err>└─</span><span class=mi>2380</span> <span class=n>nginx</span><span class=p>:</span> <span class=n>worker</span> <span class=n>process</span>
</span></span></code></pre></td></tr></table></div></div><p>Ở phần kiểm tra này, các bạn thấy máy chủ nginx xuất hiện thông báo: <strong>active (running)</strong> là được nhé.</p><p>Bây giờ bạn có thể truy cập địa chỉ IP của máy chủ hoặc domain đã cấu hình DNS về IP của máy chủ để xem giao diện mặc định của nginx
<img src=/p/huong-dan-cai-dat-nginx-tren-ubuntu/welcome-screen-e1450116630667.png width=1058 height=431 srcset="/p/huong-dan-cai-dat-nginx-tren-ubuntu/welcome-screen-e1450116630667_hub9ddf5d40f3e444685c6c68b9a3cd79d_43560_480x0_resize_box_3.png 480w, /p/huong-dan-cai-dat-nginx-tren-ubuntu/welcome-screen-e1450116630667_hub9ddf5d40f3e444685c6c68b9a3cd79d_43560_1024x0_resize_box_3.png 1024w" loading=lazy alt="Welcome nginx" class=gallery-image data-flex-grow=245 data-flex-basis=589px></p><h2 id=quản-lý-nginx>Quản lý nginx</h2><p>Một số lệnh quản lý máy chủ nginx cơ bản như sau:</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-fallback data-lang=fallback><span class=line><span class=cl>// Tạm dừng máy chủ web nginx
</span></span><span class=line><span class=cl>sudo systemctl stop nginx
</span></span></code></pre></td></tr></table></div></div><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-fallback data-lang=fallback><span class=line><span class=cl>// Start máy chủ web nginx
</span></span><span class=line><span class=cl>sudo systemctl start nginx
</span></span></code></pre></td></tr></table></div></div><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-fallback data-lang=fallback><span class=line><span class=cl>// Restart lại máy chủ web nginx
</span></span><span class=line><span class=cl>sudo systemctl start nginx
</span></span></code></pre></td></tr></table></div></div><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-gdscript3 data-lang=gdscript3><span class=line><span class=cl><span class=o>//</span> <span class=n>Nếu</span> <span class=n>bạn</span> <span class=n>chỉ</span> <span class=n>chỉnh</span> <span class=n>sửa</span> <span class=n>cấu</span> <span class=n>hình</span> <span class=n>nginx</span> <span class=n>thì</span> <span class=n>có</span> <span class=n>thể</span> <span class=n>sử</span> <span class=n>dụng</span> <span class=n>lệnh</span> <span class=n>này</span> <span class=err>để</span> <span class=n>reload</span> <span class=n>tránh</span> <span class=n>mất</span> <span class=n>kết</span> <span class=n>nối</span>
</span></span><span class=line><span class=cl><span class=n>sudo</span> <span class=n>systemctl</span> <span class=n>reload</span> <span class=n>nginx</span>
</span></span></code></pre></td></tr></table></div></div><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-fallback data-lang=fallback><span class=line><span class=cl>// Mặc định nginx sẽ khởi động cùng với máy chủ Ubuntu, nếu bạn không muốn điều đó có thể sử dụng lệnh sau để tắt nó đi.
</span></span><span class=line><span class=cl>sudo systemctl disable nginx
</span></span></code></pre></td></tr></table></div></div><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-fallback data-lang=fallback><span class=line><span class=cl>// Ngược lại với lệnh trên, lệnh này cho phép nginx khởi động khi máy chủ Ubuntu khởi động
</span></span><span class=line><span class=cl>sudo systemctl enable nginx
</span></span></code></pre></td></tr></table></div></div><h2 id=thiết-lập-nginx>Thiết lập nginx</h2><p>Khi sử dụng máy chủ web Nginx, các server block (ở đây mình sẽ dùng từ tiếng anh theo tài liệu, vì dịch ra tiếng việt không đẹp nghĩa lắm :v) có thể được sử dụng để đóng gói cấu hình liên quan tới các tên miền (domain) khác nhau. Ví dụ sau đây mình sẽ lấy domain <strong>ductranminh.com</strong>. Khi thiết lập, các bạn nhớ thay thế bằng domain của mình nhé.</p><p>Đầu tiên, mình sẽ tạo một thư mục chứa source code của mình theo đường dẫn sau</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-gdscript3 data-lang=gdscript3><span class=line><span class=cl><span class=n>sudo</span> <span class=n>mkdir</span> <span class=o>-</span><span class=n>p</span> <span class=o>/</span><span class=k>var</span><span class=o>/</span><span class=n>www</span><span class=o>/</span><span class=n>ductranminh</span><span class=o>.</span><span class=n>com</span><span class=o>/</span><span class=n>html</span>
</span></span></code></pre></td></tr></table></div></div><p>Tiếp đến, gắn quyền cho $USER</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-gdscript3 data-lang=gdscript3><span class=line><span class=cl><span class=n>sudo</span> <span class=n>chown</span> <span class=o>-</span><span class=n>R</span> <span class=o>$</span><span class=n>USER</span><span class=p>:</span><span class=o>$</span><span class=n>USER</span> <span class=o>/</span><span class=k>var</span><span class=o>/</span><span class=n>www</span><span class=o>/</span><span class=n>ductranminh</span><span class=o>.</span><span class=n>com</span><span class=o>/</span><span class=n>html</span>
</span></span></code></pre></td></tr></table></div></div><p>Để đảm bảo bạn đã cho phép quyền đọc, ghi dữ liệu với thư mục ductranminh.com, bạn có thể sử dụng lệnh sau:</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-gdscript3 data-lang=gdscript3><span class=line><span class=cl><span class=n>sudo</span> <span class=n>chmod</span> <span class=o>-</span><span class=n>R</span> <span class=mi>755</span> <span class=o>/</span><span class=k>var</span><span class=o>/</span><span class=n>www</span><span class=o>/</span><span class=n>ductranminh</span><span class=o>.</span><span class=n>com</span>
</span></span></code></pre></td></tr></table></div></div><p>Tiếp đến, mình sẽ tạo 1 file index.html trong thư mục ductranminh.com/html để bước sau mình sẽ kiểm tra xem việc thiết lập của mình có chính xác.</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-gdscript3 data-lang=gdscript3><span class=line><span class=cl><span class=n>sudo</span> <span class=n>nano</span> <span class=o>/</span><span class=k>var</span><span class=o>/</span><span class=n>www</span><span class=o>/</span><span class=n>ductranminh</span><span class=o>.</span><span class=n>com</span><span class=o>/</span><span class=n>html</span><span class=o>/</span><span class=n>index</span><span class=o>.</span><span class=n>html</span>
</span></span></code></pre></td></tr></table></div></div><p>Copy toàn bộ code HTML dưới đây, dán vào file index.html vừa tạo và lưu file. Sử dụng <strong>ctrl + x</strong> để thoát, nhập <strong>Y</strong> để confirm và nhấn <strong>enter</strong>.</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span><span class=lnt>6
</span><span class=lnt>7
</span><span class=lnt>8
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-html data-lang=html><span class=line><span class=cl><span class=p>&lt;</span><span class=nt>html</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>  <span class=p>&lt;</span><span class=nt>head</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>    <span class=p>&lt;</span><span class=nt>title</span><span class=p>&gt;</span>Welcome to ductranminh.com!<span class=p>&lt;/</span><span class=nt>title</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>  <span class=p>&lt;/</span><span class=nt>head</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>  <span class=p>&lt;</span><span class=nt>body</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>    <span class=p>&lt;</span><span class=nt>h1</span><span class=p>&gt;</span>Success! The ductranminh.com server block is working!<span class=p>&lt;/</span><span class=nt>h1</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>  <span class=p>&lt;/</span><span class=nt>body</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl><span class=p>&lt;/</span><span class=nt>html</span><span class=p>&gt;</span>
</span></span></code></pre></td></tr></table></div></div><p>Bây giờ mới là phần quan trọng nhất, thiết lập server block</p><p>Trong thư mục /etc/nginx/sites-available, bạn tạo 1 file tranminhduc.com</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-fallback data-lang=fallback><span class=line><span class=cl>sudo nano /etc/nginx/sites-available/ductranminh.com
</span></span></code></pre></td></tr></table></div></div><p>Copy và dán đoạn mã dưới đây vào file vừa tạo, sau đó lưu lại.</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-gdscript3 data-lang=gdscript3><span class=line><span class=cl><span class=n>server</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=n>listen</span> <span class=mi>80</span><span class=p>;</span>
</span></span><span class=line><span class=cl>        <span class=n>listen</span> <span class=p>[::]:</span><span class=mi>80</span><span class=p>;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>        <span class=n>root</span> <span class=o>/</span><span class=k>var</span><span class=o>/</span><span class=n>www</span><span class=o>/</span><span class=n>ductranminh</span><span class=o>.</span><span class=n>com</span><span class=o>/</span><span class=n>html</span><span class=p>;</span>
</span></span><span class=line><span class=cl>        <span class=n>index</span> <span class=n>index</span><span class=o>.</span><span class=n>html</span> <span class=n>index</span><span class=o>.</span><span class=n>htm</span> <span class=n>index</span><span class=o>.</span><span class=n>nginx</span><span class=o>-</span><span class=n>debian</span><span class=o>.</span><span class=n>html</span><span class=p>;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>        <span class=n>server_name</span> <span class=n>ductranminh</span><span class=o>.</span><span class=n>com</span> <span class=n>www</span><span class=o>.</span><span class=n>ductranminh</span><span class=o>.</span><span class=n>com</span><span class=p>;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>        <span class=n>location</span> <span class=o>/</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>                <span class=n>try_files</span> <span class=o>$</span><span class=n>uri</span> <span class=o>$</span><span class=n>uri</span><span class=o>/</span> <span class=o>=</span><span class=mi>404</span><span class=p>;</span>
</span></span><span class=line><span class=cl>        <span class=p>}</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span></code></pre></td></tr></table></div></div><p><strong><em>Lưu ý: Bạn nhớ cập nhật server_name và root thành domain và đường dẫn đến thư mục code của bạn nhé !</em></strong></p><p>Tiếp theo, liên kết tệp vừa tạo đến thư mục site-enabled – nơi mà nginx sẽ đọc khi khởi động</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-fallback data-lang=fallback><span class=line><span class=cl>sudo ln -s /etc/nginx/sites-available/ductranminh.com /etc/nginx/sites-enabled/
</span></span></code></pre></td></tr></table></div></div><p>Tiếp đến, bạn kiểm tra lỗi cú pháp bằng lệnh dưới đây để đảm bảo rằng không có bất kỳ lỗi cú pháp nào trước khi thực hiện khởi động lại máy chủ</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-fallback data-lang=fallback><span class=line><span class=cl>sudo nginx -t
</span></span></code></pre></td></tr></table></div></div><p>Cuối cùng, thực hiện restart lại máy chủ nginx và kiểm tra kết quả của mình.</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-fallback data-lang=fallback><span class=line><span class=cl>sudo systemctl restart nginx
</span></span></code></pre></td></tr></table></div></div><p><strong>Kết quả:</strong>
<img src=/p/huong-dan-cai-dat-nginx-tren-ubuntu/nginx-success.png width=791 height=63 srcset="/p/huong-dan-cai-dat-nginx-tren-ubuntu/nginx-success_hua0c68fbf3779ab70e5a95e2ec212305c_7630_480x0_resize_box_3.png 480w, /p/huong-dan-cai-dat-nginx-tren-ubuntu/nginx-success_hua0c68fbf3779ab70e5a95e2ec212305c_7630_1024x0_resize_box_3.png 1024w" loading=lazy alt="Nginx success" class=gallery-image data-flex-grow=1255 data-flex-basis=3013px></p><p>Vậy là mình đã hướng dẫn xong cách cài đặt, thiết lập, quản lý nginx trên máy chủ ubuntu 20.04. Các bạn có câu hỏi gì vui lòng comment ở phía dưới, mình và bạn sẽ cùng nhau thảo luận nhé !</p><p><em>Chúc các bạn cài đặt thành công !</em></p></section><footer class=article-footer></footer></article><div class=disqus-container><div id=disqus_thread></div><script>window.disqus_config=function(){},function(){if(["localhost","127.0.0.1"].indexOf(window.location.hostname)!=-1){document.getElementById("disqus_thread").innerHTML="Disqus comments not available by default when the website is previewed locally.";return}var t=document,e=t.createElement("script");e.async=!0,e.src="//ductm.disqus.com/embed.js",e.setAttribute("data-timestamp",+new Date),(t.head||t.body).appendChild(e)}()</script><noscript>Please enable JavaScript to view the <a href=https://disqus.com/?ref_noscript>comments powered by Disqus.</a></noscript><a href=https://disqus.com class=dsq-brlink>comments powered by <span class=logo-disqus>Disqus</span></a></div><style>.disqus-container{background-color:var(--card-background);border-radius:var(--card-border-radius);box-shadow:var(--shadow-l1);padding:var(--card-padding)}</style><script>window.addEventListener("onColorSchemeChange",e=>{typeof DISQUS=="object"&&DISQUS.reset({reload:!0})})</script><footer class=site-footer><section class=copyright>&copy;
2020 -
2024 ductranminh.com</section><section class=powerby>Theme <b><a href=https://github.com/CaiJimmy/hugo-theme-stack target=_blank rel=noopener data-version=3.26.0>Stack</a></b>
<a style=float:right href="//www.dmca.com/Protection/Status.aspx?ID=a819218a-4939-47e3-9dd6-aca1ff83ca2d" title="DMCA.com Protection Status" class=dmca-badge><img src="https://images.dmca.com/Badges/dmca-badge-w100-5x1-06.png?ID=a819218a-4939-47e3-9dd6-aca1ff83ca2d" alt="DMCA.com Protection Status"></a> <script src=https://images.dmca.com/Badges/DMCABadgeHelper.min.js></script></section></footer><div class=pswp tabindex=-1 role=dialog aria-hidden=true><div class=pswp__bg></div><div class=pswp__scroll-wrap><div class=pswp__container><div class=pswp__item></div><div class=pswp__item></div><div class=pswp__item></div></div><div class="pswp__ui pswp__ui--hidden"><div class=pswp__top-bar><div class=pswp__counter></div><button class="pswp__button pswp__button--close" title="Close (Esc)"></button>
<button class="pswp__button pswp__button--share" title=Share></button>
<button class="pswp__button pswp__button--fs" title="Toggle fullscreen"></button>
<button class="pswp__button pswp__button--zoom" title="Zoom in/out"></button><div class=pswp__preloader><div class=pswp__preloader__icn><div class=pswp__preloader__cut><div class=pswp__preloader__donut></div></div></div></div></div><div class="pswp__share-modal pswp__share-modal--hidden pswp__single-tap"><div class=pswp__share-tooltip></div></div><button class="pswp__button pswp__button--arrow--left" title="Previous (arrow left)">
</button>
<button class="pswp__button pswp__button--arrow--right" title="Next (arrow right)"></button><div class=pswp__caption><div class=pswp__caption__center></div></div></div></div></div><script src=https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe.min.js integrity="sha256-ePwmChbbvXbsO02lbM3HoHbSHTHFAeChekF1xKJdleo=" crossorigin=anonymous defer></script><script src=https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe-ui-default.min.js integrity="sha256-UKkzOn/w1mBxRmLLGrSeyB4e1xbrp4xylgAWb3M42pU=" crossorigin=anonymous defer></script><link rel=stylesheet href=https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/default-skin/default-skin.min.css crossorigin=anonymous><link rel=stylesheet href=https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe.min.css crossorigin=anonymous></main></div><script src=https://cdn.jsdelivr.net/npm/node-vibrant@3.1.6/dist/vibrant.min.js integrity="sha256-awcR2jno4kI5X0zL8ex0vi2z+KMkF24hUW8WePSA9HM=" crossorigin=anonymous></script><script type=text/javascript src=/ts/main.js defer></script><script>(function(){const e=document.createElement("link");e.href="https://fonts.googleapis.com/css2?family=Lato:wght@300;400;700&display=swap",e.type="text/css",e.rel="stylesheet",document.head.appendChild(e)})()</script></body></html>